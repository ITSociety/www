/**
 * Keep the server in it's own file.
 */

// main deps
const http = require('http');
const socket = require('../src/server/socket');
require('local-env-var');

// load our app to serve
const app = require('../app');

// default to a given port
const port = parseInt(process.env.PORT, 10) || 5000;

app.set('port', port);

// create and start a HTTP server
const server = http.createServer(app);
server.listen(port);

// bind a websocket to the http server
socket.init(server);

/* eslint-disable */
server.on("listening", () => console.log(`Server running on port ${port}`));
